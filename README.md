# Overview

This project consists of several functions for loading, preprocessing, and analyzing sales data from an `orders.csv` file. It includes functions to calculate monthly revenue, product revenue, and customer revenue. Additionally, there are tests for these functions to ensure they work correctly. The project also contains a script to generate synthetic sales data for testing purposes.

## Requirements

- Python 3.6+
- pandas
- numpy
- Faker
- Docker

# Architecture

## Docker Architecture

The project uses Docker to containerize the application, making it easy to set up and run in any environment. The architecture consists of two primary services defined in the `docker-compose.yml` file:

### Task Service:

- **Dockerfile**: `Dockerfile.task`
- **Purpose**: To run the task of generating CSV data and analyzing it.
- **Components**:
  - **Base image**: `python:3.9-slim`
  - **Working directory**: `/app`
  - **Files copied into the container**: `generate_csv.py` and `orders_analysis.py`
  - **Installed Python packages**: `pandas` and `faker`
  - **Command to run**: `python generate_csv.py orders_analysis.py`

### Test Service:

- **Dockerfile**: `Dockerfile.test`
- **Purpose**: To run the tests for the project's functions.
- **Components**:
  - **Base image**: `python:3.9-slim`
  - **Working directory**: `/app`
  - **Files copied into the container**: `tests.py`, `generate_csv.py`, and `orders_analysis.py`
  - **Installed Python packages**: `pandas` and `pytest`
  - **Command to run**: `pytest tests.py`

## Application Logic

### Data Generation:

- The `generate_csv.py` script generates synthetic sales data using the Faker library.
- The generated data is saved in `orders.csv`.

### Data Analysis:

- The `orders_analysis.py` script includes functions to load and preprocess the sales data from `orders.csv`.
- It performs various analyses such as calculating monthly revenue, product revenue, and customer revenue.

### Testing:

- The `tests.py` script includes unit tests to ensure the correctness of the functions defined in `orders_analysis.py`.
- The test service, built using `Dockerfile.test`, runs these tests in an isolated environment to verify the functionality of the application.

## Workflow

1. Build the Docker images using `docker-compose build`.
2. Start the task service to generate and analyze the sales data using `docker-compose up task`.
3. Start the test service to run the unit tests using `docker-compose up test`.

## Usage

To build the Docker images and start the services, use the following commands:

1. Build the Docker images:
   ```bash
   docker-compose build
   ```
   
2. Start the task service:
   ```bash
   docker-compose up task
   ```
   
3. Start the test service:
   ```bash
   docker-compose up test
   ```

## Files

```
.
├── Dockerfile.task
├── Dockerfile.test
├── docker-compose.yml
├── generate_csv.py
├── orders.csv
├── orders_analysis.py
├── output.txt
└── tests.py
```

- **generate_csv.py**: This file generates the required CSV data to analyze.
- **orders.csv**: This is the generated csv file from generate_csv.py which contains 10,000 records of data.
- **orders_analysis.py**: This file includes the functions to perform the operations mentioned in the task.
- **output.txt** - This files contains the sample output generated by order_analysis.py for reference.
- **tests.py**: This file includes the unit test cases.
- **docker-compose.yml**: The `docker-compose.yml` file is used to define and run multi-container Docker applications.
- **Dockerfile.task** - This Dockerfile is used to build a Docker image for running specific tasks related to data generation and analysis in the project.
- **Dockerfile.test** - This Dockerfile is used to build a Docker image for testing purposes.
